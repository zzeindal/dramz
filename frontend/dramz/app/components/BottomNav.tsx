'use client'

import Link from 'next/link'
import { usePathname } from 'next/navigation'
import { useTranslation } from '../hooks/useTranslation'

const HomeIcon = ({ active }: { active: boolean }) => {
  const opacity = active ? '0.8' : '0.4'
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill={active ? 'white' : 'none'} xmlns="http://www.w3.org/2000/svg">
      <path d="M12.0767 6.17688L12.0806 6.17981L19.3833 12.1886V19.0001C19.3833 19.4836 19.2492 19.7592 19.0669 19.9337C18.8763 20.116 18.5761 20.2501 18.0688 20.2501H5.94971C5.43434 20.2501 5.13218 20.1146 4.94287 19.9337C4.76051 19.7592 4.62549 19.4836 4.62549 19.0001V12.1886L11.9282 6.17981L11.9321 6.17688C11.9649 6.14957 11.9896 6.13599 12.0044 6.12805C12.0192 6.13595 12.0438 6.14952 12.0767 6.17688Z" stroke="white" strokeOpacity={opacity} strokeWidth="1.5" fill={active ? 'white' : 'none'} fillOpacity={opacity} />
      <path d="M1 10.93C1 11.117 1.07066 11.2844 1.21198 11.4322C1.3533 11.5799 1.54685 11.6538 1.79263 11.6538C1.92166 11.6538 2.03994 11.6237 2.14747 11.5634C2.255 11.503 2.35791 11.4367 2.45623 11.3643L11.6821 3.76429C11.7865 3.67381 11.8956 3.62857 12.0092 3.62857C12.1229 3.62857 12.232 3.67381 12.3364 3.76429L21.5622 11.3643C21.6544 11.4367 21.7543 11.503 21.8618 11.5634C21.9693 11.6237 22.0876 11.6538 22.2167 11.6538C22.4317 11.6538 22.616 11.592 22.7696 11.4683C22.9232 11.3447 23 11.1743 23 10.9571C23 10.7038 22.9048 10.4987 22.7143 10.3419L13.1198 2.42524C12.7757 2.14175 12.4055 2 12.0092 2C11.6129 2 11.2428 2.14175 10.8987 2.42524L1.29493 10.3419C1.09831 10.4987 1 10.6948 1 10.93Z" fill="white" fillOpacity={opacity} />
    </svg>
  )
}

const RewardsIcon = ({ active }: { active: boolean }) => {
  const opacity = active ? '0.8' : '0.4'
  if (active) {
    return (
      <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fillRule="evenodd" clipRule="evenodd" d="M19.9042 6.70295L14.0829 6.01595L11.6274 0.717666C11.1936 -0.218275 9.87725 -0.238531 9.40455 0.655535L9.32541 0.82199L8.14606 3.36669L6.91839 6.01565L1.09624 6.70295C0.0447652 6.82703 -0.377493 8.12052 0.399866 8.83602L4.70372 12.7976L3.56126 18.5205C3.35457 19.5558 4.46269 20.3525 5.3851 19.8387L10.5011 16.9892L15.616 19.8394C16.5414 20.355 17.645 19.5524 17.439 18.5205L16.2968 12.7976L20.6001 8.83618C21.3763 8.12178 20.9573 6.82722 19.9042 6.70295ZM10.5006 1.82451L8.21216 6.76224C8.0308 7.15356 7.65825 7.42066 7.23118 7.47107L1.80579 8.11154L5.81702 11.8037C6.1351 12.0965 6.27491 12.5317 6.19114 12.9513L5.1265 18.2845L9.89504 15.6285C10.2704 15.4194 10.7289 15.4177 11.1066 15.6281L15.8738 18.2847L14.8093 12.951C14.7254 12.5306 14.8661 12.096 15.1835 11.8038L19.1944 8.11153L13.769 7.47125C13.3392 7.42053 12.9692 7.15098 12.789 6.76213L10.5006 1.82451Z" fill="white" fillOpacity="0.8" />
        <path d="M8.21216 6.76224L10.5006 1.82451L12.789 6.76213C12.9692 7.15098 13.3392 7.42053 13.769 7.47125L19.1944 8.11153L15.1835 11.8038C14.8661 12.096 14.7254 12.5306 14.8093 12.951L15.8738 18.2847L11.1066 15.6281C10.7289 15.4177 10.2704 15.4194 9.89504 15.6285L5.1265 18.2845L6.19114 12.9513C6.27491 12.5317 6.1351 12.0965 5.81702 11.8037L1.80579 8.11154L7.23118 7.47107C7.65825 7.42066 8.0308 7.15356 8.21216 6.76224Z" fill="white" fillOpacity="0.8" />
      </svg>
    )
  }
  return (
    <svg width="21" height="20" viewBox="0 0 21 20" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M19.9042 6.70295L14.0829 6.01595L11.6274 0.717666C11.1936 -0.218275 9.87725 -0.238531 9.40455 0.655535L9.32541 0.82199L8.14605 3.36669L6.91839 6.01565L1.09624 6.70295C0.0447652 6.82703 -0.377493 8.12052 0.399866 8.83602L4.70372 12.7976L3.56126 18.5205C3.35457 19.5558 4.46269 20.3525 5.3851 19.8387L10.5011 16.9892L15.616 19.8394C16.5414 20.355 17.645 19.5524 17.439 18.5205L16.2968 12.7976L20.6001 8.83618C21.3763 8.12178 20.9573 6.82722 19.9042 6.70295ZM10.5006 1.82451L8.21216 6.76224C8.0308 7.15356 7.65825 7.42066 7.23118 7.47107L1.80579 8.11154L5.81702 11.8037C6.1351 12.0965 6.2749 12.5317 6.19114 12.9513L5.1265 18.2845L9.89504 15.6285C10.2704 15.4194 10.7289 15.4177 11.1066 15.6281L15.8738 18.2847L14.8093 12.951C14.7254 12.5306 14.8661 12.096 15.1835 11.8038L19.1944 8.11153L13.769 7.47125C13.3392 7.42053 12.9692 7.15098 12.789 6.76213L10.5006 1.82451Z" fillOpacity={opacity} />
    </svg>
  )
}

const ProfileIcon = ({ active }: { active: boolean }) => {
  const opacity = active ? '0.8' : '0.4'
  if (active) {
    return (
      <svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.72728 18H15.2727C15.8115 18 16.2341 17.8815 16.5404 17.6446C16.8468 17.4076 17 17.0823 17 16.6685C17 16.0277 16.8031 15.3503 16.4092 14.6362C16.0152 13.9221 15.4496 13.253 14.7121 12.629C13.9748 12.005 13.0825 11.4977 12.0353 11.1073C10.9882 10.7168 9.80812 10.5216 8.49497 10.5216C7.18857 10.5216 6.0118 10.7168 4.96466 11.1073C3.91752 11.4977 3.02358 12.005 2.28283 12.629C1.54209 13.253 0.976432 13.9221 0.58586 14.6362C0.195287 15.3503 0 16.0277 0 16.6685C0 17.0823 0.153199 17.4076 0.459597 17.6446C0.765996 17.8815 1.18856 18 1.72728 18ZM8.50508 8.72968C9.22562 8.72968 9.89227 8.53446 10.505 8.14403C11.1178 7.75359 11.6111 7.22468 11.9849 6.55727C12.3586 5.88987 12.5455 5.13903 12.5455 4.30477C12.5455 3.48386 12.3586 2.74804 11.9849 2.09732C11.6111 1.44661 11.1178 0.934372 10.505 0.560622C9.89227 0.186874 9.22562 0 8.50508 0C7.78453 0 7.11786 0.190211 6.50507 0.570632C5.89227 0.951056 5.39901 1.4683 5.02527 2.12235C4.65153 2.77641 4.46466 3.51056 4.46466 4.3248C4.46466 5.15238 4.65153 5.8982 5.02527 6.56227C5.39901 7.22634 5.89227 7.75359 6.50507 8.14403C7.11786 8.53446 7.78453 8.72968 8.50508 8.72968Z" fill="white" fillOpacity="0.8" />
      </svg>
    )
  }
  return (
    <svg width="17" height="18" viewBox="0 0 17 18" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M2.3841 18H14.616C16.2053 18 17 17.4816 17 16.4449C17 15.81 16.8054 15.1329 16.4162 14.4136C16.027 13.6944 15.4642 13.0157 14.7279 12.3774C13.9916 11.7392 13.0995 11.2192 12.0518 10.8175C11.0041 10.4157 9.82183 10.2149 8.50489 10.2149C7.18148 10.2149 5.99591 10.4157 4.94821 10.8175C3.90051 11.2192 3.0085 11.7392 2.27218 12.3774C1.53588 13.0157 0.973103 13.6944 0.58386 14.4136C0.19462 15.1329 0 15.81 0 16.4449C0 17.4816 0.794699 18 2.3841 18ZM1.92673 16.5324C1.79699 16.5324 1.70454 16.513 1.6494 16.4741C1.59426 16.4352 1.56669 16.3639 1.56669 16.2603C1.56669 15.8651 1.71752 15.4066 2.01918 14.885C2.32084 14.3634 2.76685 13.8596 3.35719 13.3737C3.94754 12.8877 4.67412 12.4843 5.53694 12.1636C6.39975 11.8428 7.38907 11.6825 8.50489 11.6825C9.62068 11.6825 10.6084 11.8428 11.468 12.1636C12.3275 12.4843 13.0525 12.8877 13.6428 13.3737C14.2332 13.8596 14.6792 14.3634 14.9809 14.885C15.2825 15.4066 15.4334 15.8651 15.4334 16.2603C15.4334 16.3639 15.4058 16.4352 15.3507 16.4741C15.2955 16.513 15.2063 16.5324 15.083 16.5324H1.92673ZM8.50489 9.00972C9.27689 9.00972 9.98076 8.80238 10.6165 8.38769C11.2523 7.973 11.7599 7.42063 12.1394 6.73056C12.5189 6.0405 12.7087 5.27754 12.7087 4.44169C12.7087 3.61232 12.5205 2.86231 12.1443 2.19168C11.768 1.52106 11.262 0.98812 10.6263 0.592873C9.9905 0.197624 9.28337 0 8.50489 0C7.7329 0 7.02903 0.200864 6.39327 0.602591C5.7575 1.00432 5.24987 1.54212 4.87037 2.21598C4.49086 2.88985 4.3011 3.63823 4.3011 4.46113C4.3011 5.2905 4.49086 6.05022 4.87037 6.74029C5.24987 7.43035 5.7575 7.98111 6.39327 8.39255C7.02903 8.804 7.7329 9.00972 8.50489 9.00972ZM8.50489 7.54212C8.03132 7.54212 7.59504 7.40443 7.19607 7.12905C6.7971 6.85367 6.47597 6.48272 6.2327 6.0162C5.98942 5.54968 5.86779 5.03132 5.86779 4.46113C5.86779 3.89741 5.9878 3.39039 6.22784 2.94007C6.46787 2.48974 6.78737 2.13175 7.18634 1.8661C7.58531 1.60044 8.02483 1.46761 8.50489 1.46761C8.99144 1.46761 9.4342 1.5972 9.83317 1.85637C10.2322 2.11555 10.5501 2.4703 10.7868 2.92063C11.0236 3.37095 11.1419 3.87797 11.1419 4.44169C11.1419 5.01188 11.0219 5.53186 10.7819 6.00162C10.5419 6.47139 10.2224 6.84558 9.82344 7.12419C9.42447 7.40281 8.98495 7.54212 8.50489 7.54212Z" fillOpacity={opacity} />
    </svg>
  )
}

export default function BottomNav() {
  const pathname = usePathname()
  const { t } = useTranslation()
  
  const items = [
    { href: '/', label: t('common.home'), icon: HomeIcon },
    { href: '/rewards', label: t('common.rewards'), icon: RewardsIcon },
    { href: '/profile', label: t('common.profile'), icon: ProfileIcon },
  ]
  
  return (
    <nav className="safe-bottom fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[480px] z-10 bg-[#0f0b1d] border-t border-[#261f3f]">
      <div className="grid grid-cols-3">
        {items.map(i => {
          const active = pathname === i.href
          const IconComponent = i.icon
          return (
            <Link
              key={i.href}
              href={i.href}
              className={`flex flex-col items-center py-2 ${active ? 'text-white/80' : 'text-white/40'}`}
            >
              <div className="text-lg">
                <IconComponent active={active} />
              </div>
              <div className="text-[11px]">{i.label}</div>
            </Link>
          )
        })}
      </div>
    </nav>
  )
}


